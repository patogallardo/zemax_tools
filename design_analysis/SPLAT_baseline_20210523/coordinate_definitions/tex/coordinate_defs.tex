\documentclass[]{article}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{pdfpages}
\usepackage{caption}

\title{SPLAT Baseline Coordinate Definitions}
\author{P. Gallardo}
\date{\today}

\begin{document}
\maketitle

In this document I summarize the coordinate
definitions for the three mirrors in the TMA design 
filename  SPLAT\textunderscore Base \textunderscore Fwd.zmx, which can be found in \url{https://github.com/patogallardo/zemax_tools/tree/master/design_analysis/SPLAT_baseline_20210523/
SPLAT_Base_Fwd.zmx}. For Step files of this design see folder coordinate\textunderscore definitions/step\textunderscore files. 

Surfaces covered in this document are: Origin, Primary, Secondary, Tertiary and Image surface. These surfaces can be fully defined with a location vector and a rotation angle. Another way of defining these is by using a location vector and a rotation matrix, which is useful for Grasp studies.

\section{Surface definitions and rotation angles}

Table \ref{surfdeftable} shows the surface definitions for this design. Angle $\alpha$ refers to the rotation around the X coordinate in degrees.

\begin{table}
\begin{center}
	\input{coordinate_sys_pos_rot_angles.tex}
\end{center}

\caption{Surface local coordinate system locations and rotations about the X axis for the TMA.}
\label{surfdeftable}
\end{table}


\section{Rotation matrices}
The rotation angle can be expressed more generally by a rotation matrix and an offset,
 which gives the freedom to represent any 3D rotation in space.
 
In this formalism a vector in the local coordinate system $\vec x_l$ can be expressed as a global vector $\vec x_g$ via an offset $\vec x_O$ and a rotation matrix $R$ as \begin{equation}
\vec x_g = \vec x_O + R\vec x_l.
\end{equation} 

Note that the columns of $R$ contain the orientation vectors of the local x,y,z directions. 

Tables \ref{rot:prime}, \ref{rot:second}, \ref{rot:tert} and \ref{rot:img} show the rotation matrices for the origins of the mirror
coordinate systems.


\begin{minipage}{0.45\linewidth}
	\input{prime_rotmat.tex}
	\label{rot:prime}
	\captionof{table}{Rotation matrix for the M1 local coordinate system.}
\end{minipage}
\begin{minipage}{0.45\linewidth}
\begin{center}
	\input{second_rotmat.tex}
	\captionof{table}{Rotation matrix for the M2 local coordinate system.}
	\label{rot:second}
\end{center}
\end{minipage}

\vspace{5em}

\begin{minipage}{0.45\linewidth}
\begin{center}
	\input{tert_rotmat.tex}
	\captionof{table}{Rotation matrix for the M3 local coordinate system.}
	\label{rot:tert}
\end{center}
\end{minipage}
\begin{minipage}{0.45\linewidth}
\begin{center}
	\input{Image_rotmat.tex}
	\captionof{table}{Rotation matrix for the image surface local coordinate system.}
	\label{rot:img}
\end{center}
\end{minipage}

\newpage
\includepdf[trim=0cm 0.38cm 0cm 0cm]{../step_files/sldw/Orientations_drawing.pdf}

\end{document}